{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Install: System Dependencies",
      "type": "shell",
      "osx": {
        "command": "brew bundle install --file=${workspaceFolder}/config/system/Brewfile"
      },
      "windows": {
        "command": "chocolatey install ${workspaceFolder}/config/system/chocolatey.config"
      },
      "linux": {
        "command": "apt install -y < ${workspaceFolder}/config/system/packages.txt"
      }
    },
    {
      "label": "Conan: Build JUCE",
      "type": "shell",
      "problemMatcher": [
        "$gcc"
      ],
      "osx": {
        "command": "conan create juce-conan -pr:b=${workspaceFolder}/conan/profiles/macos"
      },
      "windows": {
        "command": "conan create juce-conan -pr:b=${workspaceFolder}/conan/profiles/windows"
      },
      "linux": {
        "command": "conan create juce-conan -pr:b=${workspaceFolder}/conan/profiles/linux"
      }
    },
    {
      "label": "Conan: Build PeakEater",
      "type": "shell",
      "problemMatcher": [
        "$gcc"
      ],
      "osx": {
        "command": "conan install . -pr:b=${workspaceFolder}/conan/profiles/macos && conan build . -pr:b=${workspaceFolder}/conan/profiles/macos"
      },
      "windows": {
        "command": "conan install . -pr:b=${workspaceFolder}/conan/profiles/windows && conan build . -pr:b=${workspaceFolder}/conan/profiles/windows"
      },
      "linux": {
        "command": "conan install . -pr:b=${workspaceFolder}/conan/profiles/linux && conan build . -pr:b=${workspaceFolder}/conan/profiles/linux"
      }
    },
    {
      "label": "Test: Run PeakEater Standalone",
      "type": "shell",
      "command": "${workspaceFolder}/build/PeakEater_artefacts/${input:build_type}/Standalone/PeakEater.app/Contents/MacOS/PeakEater"
    }
  ]
}